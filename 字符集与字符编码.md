# 基础知识

## 概念

### 字符

字符（Character）：字符是各种文字和符号的总称。一个字符可以是一个中文汉字、一个英文字母、一个阿拉伯数字、一个标点符号、一个图形符号或者控制符号等。

### 字符集

字符集（Character Set）：字符集是指多个字符的集合。不同的字符集包含的字符个数不一样、包含的字符不一样、对字符的编码方式也不一样。

常用的字符集：ASCII 字符集、ANSI 字符集、汉字字符集、Unicode 字符集等。

### 字符编码

字符编码（Character Encoding）：字符编码是指一种映射规则。每一种字符集都必须有特定的编码规则，将字符映射成为二进制编码，从而实现计算机中的表示、存储和计算。

常用的字符编码：ASCII 编码、GB2312 编码、GBK 编码、GB18030 编码、UTF-8 编码、UTF-16 编码、UTF-32 编码等。

**字符集与字符编码的关系：**

- ASCII 字符集对应 ASCII 编码
- ANSI 字符集表示本地字符集，在简体中文 Windows 操作系统中，ANSI 字符集对应 GB2312 编码；在繁体中文 Windows 操作系统中，ANSI 字符集对应 Big5 编码
- 汉字字符集包含：GB2312 编码、GBK 编码、GB18030 编码、Big5 编码
- Unicode 字符集包含：UTF-8 编码、UTF-16 编码、UTF-32 编码

### 码点

码点（Code Point）：码点是指在某个字符集中，根据某种编码规则将字符编码后得到的值。比如在 ASCII 字符集中，字母 A 经过 ASCII 编码得到的值是 65，那么 65 就是字符 A 在 ASCII 字符集中的码点。

## 字符集

### ASCII 字符集

#### 标准 ASCII 字符集

ASCII (American Standard Code for Information Interchange)：美国信息交换标准代码是基于拉丁字母的一套电脑编码系统，主要用于显示现代英语和其他西欧语言。它是最通用的信息交换标准，共定义了 128 个字符 。

#### ANSI

为使计算机支持更多语言，通常使用 0x00–0x7F 范围的 1 个字节来表示 1 个英文字符，超出此范围的使用 0x80–0xFFFF 来编码，即扩展的 ASCII 编码。不同的国家和地区制定了不同的标准，由此产生了 GB2312、GBK、GB18030、Big5、Shift_JIS 等各自的编码标准，这些使用多个字节来代表一个字符的各种汉字延伸编码方式，称为 ANSI 编码，美国国家标准学会（AMERICAN NATIONAL STANDARDS INSTITUTE: ANSI）。在简体中文 Windows 操作系统中，ANSI 代表 GB2312 编码；在繁体中文 Windows 操作系统中，ANSI 代表 Big5 编码。

### 汉字字符集

#### GB2312

GB2312 或 GB2312-80 是一个简体中文字符集的中国国家标准，全称为《信息交换用汉字编码字符集–基本集》，由中国国家标准总局发布，1981 年 5 月 1 日实施。

GB2312 标准共收录 6763 个汉字，其中一级汉字 3755 个，二级汉字 3008 个；同时，GB2312 收录了包括拉丁字母、希腊字母、日文平假名及片假名字母、俄罗斯语西里尔字母在内的 682 个全形字符。

#### GBK

GBK 全称《汉字内码扩展规范》，发布于 1995 年，只是"技术规范指导性文件"，并不属于国家标准。其中的 K 是汉语拼音 Kuo Zhan（扩展）的首字母，意思是 GB2312 的扩展版，在 GB2312 的基础上将字符扩展到两万多个，完全兼容 GB2312。

#### GB18030

GB18030 全称《信息技术中文编码字符集》，是中华人民共和国国家标准所规定的变长多字节字符集，其对 GB2312-1980 完全向后兼容，与 GBK 基本向后兼容，并支持 Unicode（GB 13000）的所有码位，GB18030-2005 共收录汉字 70,244 个。

### Unicode 字符集

Unicode 又称国际码、统一码，是计算机科学领域里的一项业界标准。它对世界上大部分的文字系统进行了整理、编码，使得电脑可以用更为简单的方式来呈现和处理文字。Unicode 是围绕全球通用字符集（Universal Character Set，UCS）的标准来发展的，使用两个字节来编码，称为 UCS-2；使用 4 个字节来编码，称为 UCS-4。

Unicode 的实现方式称为 Unicode 转换格式（Unicode Transformation Format，简称为UTF）。UTF-8、UTF-16、UTF-32 都是 Unicode 的编码方案。

## 字符编码

### ASCII 编码

ASCII 码为单字节，使用 7 位二进制来表示一个 ASCII 字符，共计表示 128 个字符，其编码的取值范围为 0x00–0x7F。

### GB2312 编码

GB2312 中对所收汉字进行了"分区"处理，每区含有 94 个汉字／符号。这种表示方式也称为区位码。

分区：

- 01–09 区为特殊符号。
- 16–55 区为一级汉字，按拼音排序。
- 56–87 区为二级汉字，按部首／笔画排序。
- 10–15 区及 88–94 区则没有编码。

编码规则：

- 通常采用EUC储存方法，以便兼容于ASCII。
- 每个汉字及符号以两个字节来表示。第一个字节称为"高位字节"，第二个字节称为"低位字节"。
- "高位字节"使用了 0xA1–0xF7 （把 01–87 区的区号加上 0xA0），"低位字节"使用了 0xA1–0xFE（把 01–94 加上 0xA0）。 由于一级汉字从 16 区起始，汉字区的"高位字节"的范围是 0xB0–0xF7，"低位字节"的范围是 0xA1–0xFE，占用的码位是 72*94=6768。其中有 5 个空位是 D7FA–D7FE。

### GBK 编码

GBK 是对 GB2312 的扩展，占用 2 个字节，GBK 不再要求低字节一定是 127 号之后的内码，只要第一个字节是大于 127 就固定表示这是一个汉字的开始，不管后面跟的是不是扩展字符集里的内容。

编码规则：

- 采用双字节表示，总体编码范围为 8140-FEFE，首字节在 81-FE 之间，尾字节在 40-FE 之间。

### GB18030 编码

GB18030 采用变长编码，可以是 1 个字节、2 个字节和 4 个字节。是对 GB2312 和 GBK 的扩展，完全兼容两者。

编码规则：

- 单字节，其值从 0x00 到 0x7F。
- 双字节，第一个字节的值从 0x81 到 0xFE，第二个字节的值从 0x40 到 0xFE（不包括 0x7F）。
- 四字节，第一个字节的值从 0x81 到 0xFE，第二个字节的值从 0x30 到 0x39，第三个字节从 0x81 到 0xFE，第四个字节从 0x30 到 0x39。

### UTF-8 编码

编码规则：

- 对于单字节的符号，字节的第一位设为 0，后面 7 位为这个符号的 Unicode 码。因此对于英语字母，UTF-8 编码和 ASCII 码是相同的, 所以 UTF-8 能兼容 ASCII 编码。
- 对于 n 字节的符号（ n > 1），第一个字节的前 n 位都设为 1，第 n + 1 位设为 0，后面字节的前两位一律设为 10 。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码。

### UTF-16 编码

UTF-16 是一种变长字符编码, 这种编码方式比较特殊, 它将字符编码成 2 字节 或者 4 字节。

编码规则：

- 对于 Unicode 编号小于 0x10000 的字符，使用 2 字节存储，不进行任何转换，直接存储 Unicode 编号，如汉字 "中" 的 Unicode 编号为 0x4E2D，则其编码就为 0x4E2D；但多字节数值存在字节序问题，默认使用小端存储，其存储顺序为：0x2D 0x4E。如英文字符 "a" 的 Unicode 编号为 0x0061，则其存储顺序为 0x61 0x00。
- 对于 Unicode 编号在 0x10000–0x10FFFF 之间的字符，使用 4 字节存储，前两个字节的高 6 位固定为 110110，后两个字节的高 6 位固定为 110111，前后部分各剩余 10 位二进制表示符号的 Unicode 编号减去 0x10000 的结果。

### UTF-32 编码

用于表示 Unicode 编号大于 0x10FFFF 的字符。

编码规则：

- 采用固定 4 个字节长度的编码，足以容纳 Unicode 中的所有字符，无须任何转换，直接存储 Unicode 编号即可。

